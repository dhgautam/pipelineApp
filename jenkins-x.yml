buildPack: none
pipelineConfig:
  pipelines:
    pullRequest:
      pipeline:
        agent:
          image: gcr.io/jenkinsxio/builder-go
        stages:
        - name: release
          steps:
          - command: echo dummy step preview
            dir: /workspace/source
            name: start-preview
          - command: ./pipeline.sh
            dir: /workspace/source
            name: run-preview
    release:
      pipeline:
        agent:
          image: gcr.io/jenkinsxio/builder-go
        stages:
        - name: release
          steps:
          - command: echo dummy step release
            dir: /workspace/source
            name: promote-release
          - command: pwd; whoami; ls -l
            dir: /workspace/source
            name: run-validation
          - command: ./pipeline.sh
            dir: /workspace/source
            name: run-pipeline